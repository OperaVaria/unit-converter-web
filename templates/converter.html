<!-- Converter page -->
{% extends "base.html" %}
{% block body %}
<!-- Main container. -->
<div class="container horizontal margined">
  <!-- Title. -->
  <div class="item title">
    <h1>{{conv_title}}</h1>
  </div>
  <!-- Side container(s). With a for loop, jinja2 creates two identical containers,
       one with input and one with output attributes -->
  {% set sides = ["input", "output"] %}
  {% for side in sides %}
  <div class="container vertical half-wide">
    <!-- Subtitle, filled by a jinja2 if statement. -->
    <div class="item">
      {% if locale == "en" %}
        <h2>{{side|capitalize}}:</h2>
      {% elif locale == "hu" and side == "input" %}
        <h2>Bemenet:</h2>
      {% elif locale == "hu" and side == "output" %}
        <h2>Kimenet:</h2>
      {% endif %}
    </div>
    <!-- Unit system box, bordered. -->
    <div class="container vertical bordered">
      <!-- Unit system selection menu. -->
      <div class="item">
        <label class="label" for="{{side ~ '-system-menu'}}">
          {{ _("Mértékegységrendszer") }}:</label>
        <br>
        <select name="{{side ~ '-system'}}" id="{{side ~ '-system-menu'}}"
          onchange="submitValue(this.id, this.value);">
          <option value="" disabled selected>{{ _("Kérem válasszon") }}:</option>
          <!-- Menu populated by jinja2 on loading. -->
          {% for raw, gui in unit_sys_dict.items() %}
          <option value="{{raw}}">{{gui}}</option>
          {% endfor %}
        </select>
      </div>
      <!-- System information box. -->
      <div class="item">
        <h3 class="label">{{ _("Információ") }}:</h3>
        <div class="info-box bordered">
          <p id="{{side ~ '-system-info'}}" class="info-text large">---</p>
        </div>
      </div>
    </div>
    <!-- Unit box, bordered. -->
    <div class="container vertical bordered">
      <!-- Unit selection menu. -->
      <div class="item">
        <label class="label" for="{{side ~ '-unit-menu'}}">{{ _("Mértékegység") }}:</label>
        <br>
        <select name="{{side ~ '-unit'}}" id="{{side ~ '-unit-menu'}}"
          onchange="submitValue(this.id, this.value);">
          <option value="" disabled selected>{{ _("Kérem válasszon") }}:</option>
          <!-- Menu populated by JavaScript after unit system selection. -->
        </select>
      </div>
      <!-- Unit information box. -->
      <div class="item">
        <h3 class="label">{{ _("Információ") }}:</h3>
        <div class="info-box bordered">
          <p id="{{side ~ '-unit-info'}}" class="info-text small">---</p>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}  
  <!-- Calculation and result container. -->
  <div class="container vertical full-wide">
    <!-- Input value box. -->
    <div class="item">
      <label class="label" for="input-value-box">{{ _("Bemeneti érték") }}:</label>
      <br>
      <input type="number" name="input-value"
        id="input-value-box" placeholder="{{ _('Érték') }}" min="0"
        onfocus="this.value='';">
    </div>
    <!-- Convert button. -->
    <div class="item">
      <button class="normal" id="convert-btn"
        onclick="validateConvBtn(this.id, this.value);"
        >{{ _("Konvertálás") }}</button>
    </div>
    <!-- Result box. -->
    <div class="item result-box bordered">
      <h3>{{ _("Eredmény") }}:</h3>
      <div>
        <p id="result-field" class="result-text">---</p>
        <p id="symbol-field" class="result-text">n/a</p>
      </div>
    </div>
  </div>
  <!-- Button container. -->
  <div class="container horizontal full-wide">
    <!-- Swap button. -->
    <div class="item">
      <button
        class="normal" id="swap-btn"
        onclick="validateConvBtn(this.id, this.value);"
        >{{ _("Fordított") }}</button>
    </div>
    <!-- Reset button. -->
    <div class="item">
      <button class="normal" onclick="window.location.reload(true);">{{ _("Reset") }}</button>
    </div>
    <!-- Back button. -->
    <div class="item">
      <button class="normal" onclick="loadPage('/');">{{ _("Vissza") }}</button>
    </div>
  </div>
</div>
{% endblock body %}
<!-- Footer with buttons to different calculators. -->
{% block footer %}
<!-- Button builder jinja2 loop.-->
{% for raw, title in cat_dict.items() %}
<div class="item">
  <button class="small" onclick="loadPage('{{raw}}');">{{title}}</button>
</div>
{% endfor %} {% endblock footer %}
<!-- Additional JavaScript for converter page functionality. -->
{% block js %}
<!-- Text strings that need gettext handling. -->
<script>
  const errorText = "{{ _('Hiba!') }}";
  const missingValue = "{{ _('Hiányzó vagy rossz érték!') }}";
  const missingInput = "{{ _('Hiányzó bemeneti mértékegység!') }}";
  const missingOutput = "{{ _('Hiányzó kimeneti mértékegység!') }}";
</script>
<!-- Script file for converter page. -->
<script src="{{ url_for('static', filename='js/converterScript.js') }}"></script>
{% endblock js %}
